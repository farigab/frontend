<div class="container">
  <div class="page-header">
    <div class="page-header-content">
      <h1 class="page-title">Dashboard</h1>
      <p class="page-subtitle">Visualize seus achievements e progresso</p>
    </div>
    <a routerLink="/achievements/new" pButton label="Novo Achievement" icon="pi pi-plus" class="btn-primary"></a>
  </div>

  @if (loading()) {
  <div class="loading">
    <i class="pi pi-spin pi-spinner" style="font-size: 2.5rem"></i>
    <p class="loading-text">Carregando dados...</p>
  </div>
  }

  @if (!loading() && summary()) {
  <div class="dashboard-content fade-in">
    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card stat-card-primary">
        <div class="stat-icon">
          <i class="pi pi-trophy"></i>
        </div>
        <div class="stat-info">
          <div class="stat-value">{{ summary()?.total_achievements || 0 }}</div>
          <div class="stat-label">Total Achievements</div>
        </div>
      </div>

      <div class="stat-card stat-card-success">
        <div class="stat-icon">
          <i class="pi pi-tag"></i>
        </div>
        <div class="stat-info">
          <div class="stat-value">{{ summary()?.categories_count || 0 }}</div>
          <div class="stat-label">Categorias</div>
        </div>
      </div>

      <div class="stat-card stat-card-info">
        <div class="stat-icon">
          <i class="pi pi-calendar-plus"></i>
        </div>
        <div class="stat-info">
          <div class="stat-value">{{ summary()?.earliest_date ? (summary()?.earliest_date | date: 'dd/MM/yy') : '-' }}
          </div>
          <div class="stat-label">Primeiro</div>
        </div>
      </div>

      <div class="stat-card stat-card-warning">
        <div class="stat-icon">
          <i class="pi pi-calendar-times"></i>
        </div>
        <div class="stat-info">
          <div class="stat-value">{{ summary()?.latest_date ? (summary()?.latest_date | date: 'dd/MM/yy') : '-' }}</div>
          <div class="stat-label">Último</div>
        </div>
      </div>
    </div>

    <!-- Charts Section -->
    <div class="charts-grid">
      <div class="chart-card">
        <div class="chart-header">
          <h2 class="chart-title">Achievements por Categoria</h2>
          <i class="pi pi-chart-pie chart-icon"></i>
        </div>
        <div class="chart-content">
          <p-chart type="doughnut" [data]="categoryChartData()" [options]="categoryChartOptions()"></p-chart>
        </div>
      </div>

      <div class="chart-card">
        <div class="chart-header">
          <h2 class="chart-title">Categorias</h2>
          <i class="pi pi-list chart-icon"></i>
        </div>
        <div class="chart-content">
          <div class="category-list">
            @for (entry of categoryEntries(); track entry[0]) {
            <div class="category-item">
              <span class="category-name">{{ entry[0] }}</span>
              <span class="category-count">{{ entry[1] }}</span>
            </div>
            }
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
      <h2 class="section-title">Ações Rápidas</h2>
      <div class="actions-grid">
        <a routerLink="/achievements" class="action-card">
          <div class="action-icon action-icon-blue">
            <i class="pi pi-list"></i>
          </div>
          <div class="action-content">
            <h3 class="action-title">Ver Todos</h3>
            <p class="action-description">Todos os seus achievements</p>
          </div>
          <i class="pi pi-chevron-right action-arrow"></i>
        </a>

        <a routerLink="/reports" class="action-card">
          <div class="action-icon action-icon-green">
            <i class="pi pi-chart-bar"></i>
          </div>
          <div class="action-content">
            <h3 class="action-title">Relatórios</h3>
            <p class="action-description">Análises e estatísticas</p>
          </div>
          <i class="pi pi-chevron-right action-arrow"></i>
        </a>

        <a routerLink="/timeline" class="action-card">
          <div class="action-icon action-icon-purple">
            <i class="pi pi-calendar"></i>
          </div>
          <div class="action-content">
            <h3 class="action-title">Timeline</h3>
            <p class="action-description">Histórico cronológico</p>
          </div>
          <i class="pi pi-chevron-right action-arrow"></i>
        </a>
      </div>
    </div>
  </div>
  }
</div>
